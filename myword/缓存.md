# 缓存



### 穿透

Q:

就是请求没有命中缓存，直接把请求转到数据库上，数据库中也不存在对应的数据（也就是空查询），导致数据库压力过大。

A:

主要目标就是不要让数据库发生空查询。所以可以在请求的时候判断（很难判断），也可以用布隆过滤器。

同样也可把请求压在缓存中，也就是空值也缓存（一般要加上超时）

### 击穿

Q:

同样是缓存中没有命中（多是缓存到期），瞬间有很多并发过来，导致第一个请求还没有来得及更新缓存，所有的请求都传到数据库中

A:

主要是让缓存中有数据，能命中。所以可以让热点数据永不过期（或者过期时间长一点）

同样，也让第一个请求完成，更新到缓存中去。之后的请求就可以正常命中了（加锁，互斥）



### 雪崩

Q:

大批量的缓存到期（与击穿一条相比），所有的请求都并发到数据库上

A:

缓存数据过期时间别一样，设置随机

缓存数据库分布式，让数据均匀的分布到多个缓存数据库中

热点数据永不过期